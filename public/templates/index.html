{% extends "base.html" %}

{% block content %}

<body>
	{% if error %}
	<h2>{{error}}</h2>
	{% endif %}

	<section class="card">
		<h1><b>Statify</b></h1>

		<datalist id="families-datalist">
			{% for family in families.values() %}
				<option value="{{ family.name }}">
			{% endfor %}
		</datalist>

		<!-- chart type selector -->

		<p class = "form-divider">Chart type</p>

		<input type="radio" id="chart1" name="chart-selector">
		<label for="chart1">Nombre de velages par jour</label><br>

		<input type="radio" id="chart2" name="chart-selector">
		<label for="chart2">Animaux nés en période de pleine lune</label><br>

		<input type="radio" id="chart3" name="chart-selector">
		<label for="chart3">Distribution des races</label><br>

		<input type="radio" id="chart4" name="chart-selector" checked><span></span></input>
		<label class="radio-label" for="chart4">Pâturage</label><br>

		<!-- nombre de velages par jour -->

		<form method="get" action="/" id="calving-selector">
			<p class = "form-divider">Family & date selection</p>
			<input name="chart" value="0" hidden>

			<input class="input" placeholder="Family" list="families-datalist" id="family" name="famille"><br>

			<label form="date_from">From</label>
			<input class="input" type="date" value="jj/mm/aaaa" name="date_from" min="{{min_date}}" max="{{max_date}}" required>

			<label form="date_to">to</label>
			<input class="input" type="date" value="jj/mm/aaaa" name="date_to" min="{{min_date}}" max="{{max_date}}" required><br>

			<input class="button" type="submit" value="Afficher">
		</form>

		<!-- animaux nés en période de pleine lune  -->

		<form method="get" action="/" id="moon-selector">
			<p class = "form-divider">Family & date selection</p>
			<input name="chart" value="1" hidden>

			<input class="input" placeholder="Family" list="families-datalist" id="family" name="famille"><br>

			<label form="date_from">From</label>
			<input class="input" type="date" value="jj/mm/aaaa" name="date_from" min="{{min_date}}" max="{{max_date}}" required>

			<label form="date_to">to</label>
			<input class="input" type="date" value="jj/mm/aaaa" name="date_to" min="{{min_date}}" max="{{max_date}}" required><br>

			<input class="button" type="submit" value="Afficher">
		</form>

		<!-- distribution des races -->

		<form method="get" action="/" id="breed-selector">
			<p class = "form-divider">Breed selection</p>
			<input name="chart" value="2" hidden>

			<input placeholder="Breed" class="input" list="families-datalist" id="breed" name="breed" required><br>
			<input placeholder="Percentage" class="input" type="number" id="percentage" name="percentage" required><br>

			<input class="button" type="submit" value="Afficher">
		</form>

		<!-- paturage  -->

		<form method="get" action="/" id="paturage-selector">
			<p class = "form-divider">Date selection</p>
			<input name="chart" value="3" hidden>

			<label form="date_from">From</label>
			<input class="input" type="date" value="jj/mm/aaaa" name="date_from" min="{{min_date}}" max="{{max_date}}" required>

			<label form="date_to">to</label>
			<input class="input" type="date" value="jj/mm/aaaa" name="date_to" min="{{min_date}}" max="{{max_date}}" required><br>

			<input class="button" type="submit" value="Afficher">
		</form>
	</section>

	<script>
		var data = '{{my_data}}'
		var chart_id = '{{chart_id}}'
	</script>

	{% if chart_id == 3 %}
		<p id = "paturage-error" class = "error" hidden>Votre appareil ne supporte pas l'option pâturage</p>
		<canvas width = "800px" height = "600px" class = "card graph" id = "paturage"></canvas>
	{% else %}
		<canvas class="graph" id="graph" width="800px" height="600px"></canvas>
	{% endif %}
</body>
{% endblock %}
